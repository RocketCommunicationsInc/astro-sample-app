<link rel="import" href="/bower_components/polymer/polymer.html">


<dom-module id="rux-icon">
	<template>
		<style>
			:host {
				display: inline-block;
				
				height: var(--advanced-status-icon-height, 38px);
				width: var(--advanced-status-icon-width, 38px);

				outline: 1px solid red;
			}
		</style>
	</template>

	<script>
		class RuxIcon extends Polymer.Element {
			static get is() { return 'rux-icon'; }
			static get properties() {
				return {
					icon: {
						type: String,
						observer: '_updateIcon'
					}
				}
			}

			constructor() {
				super();
			
				this._iconData = this._test.bind(this);
				
			}

			connectedCallback() {
				super.connectedCallback();
				window.addEventListener('icon-library-added', this._iconData);
			}

			disconnectedCallback() {
				super.disconnectedCallback();
				window.removeEventListener('icon-library-added', this._iconData);
			}

			ready() {
				super.ready();
			}

			_test(e) {
				console.log('======================== ', e);
			}

			_listenEvent(e) {
				console.log('======================== listen event', e);
			}

			_updateIcon(icon) {
				console.info('Updating Icon');
				const parts = icon.split(':');
				this._iconName = parts.pop();
				this._iconLibrary = parts.pop();


				window.dispatchEvent(new CustomEvent('set-icon', 
					{ detail : {
						icon: this._iconName,
						library: this._iconLibrary
					} }
				));
				

				


				// listen for an event on the library element
				
			}
		}

		customElements.define(RuxIcon.is, RuxIcon);
	</script>

</dom-module>